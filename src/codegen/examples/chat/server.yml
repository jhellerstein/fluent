name: ChatServer

schema:
  connect: 
    type: channel
    cols:
      server_addr: std::string
      client_addr: std::string
      nickname: std::string
  mcast:
    type: channel
    cols:
      addr: std::string
      msg: std::string
  nodelist:
    type: table
    cols:
      client_addr: std::string
      nickname: std::string             

bloom:
  subscribe: nodelist <= connect | project<1, 2>();
  multicast: mcast <= cross(mcast, nodelist) | project<2, 1>();